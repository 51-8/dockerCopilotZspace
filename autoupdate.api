syntax = "v1"

type DoLoginReq {
	Secret_key string `form:"secret_key,optional"`
}
type StartContainerReq {
	Name string `form:"name,optional"`
}
type StopContainerReq {
	Name string `form:"name,optional"`
}
type MsgResp {
	Status string `json:"status"`
}

service autoUpdate {
	@handler webindex
	get / () returns ()
}

@server(
	prefix: /
	group: Login
	middleware: IndexCheckMiddleware
)
service autoUpdate {
	@handler DoLogin
	post /login (DoLoginReq) returns ()

	@handler LoginIndex
	get /login () returns ()
}

@server(
	prefix: /containersManager
	group: containersManager
	middleware: CookieCheckMiddleware
)
service autoUpdate {
	@handler ContainersManagerIndex
	get / () returns ()

	@handler StartContainer
	post /start_container (StartContainerReq) returns (MsgResp)

	@handler StopContainer
	post /stop_container (StopContainerReq) returns (MsgResp)
}

@server(
	prefix: /imagesManager
	group: imagesManager
	middleware: CookieCheckMiddleware
)
service autoUpdate {
	@handler imagesManagerIndex
	get / () returns ()
}